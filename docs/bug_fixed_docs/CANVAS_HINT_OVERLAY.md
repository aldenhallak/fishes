# ç”»å¸ƒæç¤ºæ–‡å­—å±…ä¸­è¦†ç›–å±‚

## åŠŸèƒ½æè¿°

å°† "(facing right please)" æç¤ºæ–‡å­—ä»æ ‡é¢˜ä¸‹æ–¹ç§»åˆ°ç”»å¸ƒæ­£ä¸­å¤®ï¼Œä½œä¸ºè¦†ç›–å±‚æ˜¾ç¤ºã€‚å½“ç”»å¸ƒä¸ºç©ºæ—¶æ˜¾ç¤ºæç¤ºï¼Œå½“ç”¨æˆ·å¼€å§‹ç»˜ç”»æˆ–ç”»å¸ƒæœ‰å†…å®¹æ—¶è‡ªåŠ¨éšè—ã€‚

## å®ç°æ•ˆæœ

### æ˜¾ç¤ºçŠ¶æ€
- **ç”»å¸ƒä¸ºç©ºæ—¶**: æç¤ºæ–‡å­—æ˜¾ç¤ºåœ¨ç”»å¸ƒæ­£ä¸­å¤®ï¼ŒåŠé€æ˜æœ¨è´¨è‰²è°ƒ
- **å¼€å§‹ç»˜ç”»æ—¶**: æç¤ºæ–‡å­—ç«‹å³æ·¡å‡ºéšè—
- **ç”»å¸ƒæœ‰å†…å®¹æ—¶**: æç¤ºæ–‡å­—ä¿æŒéšè—
- **æ¸…ç©ºç”»å¸ƒå**: æç¤ºæ–‡å­—é‡æ–°æ˜¾ç¤º

### è§†è§‰æ•ˆæœ
- ä½ç½®: ç”»å¸ƒæ­£ä¸­å¤®ï¼ˆå‚ç›´å’Œæ°´å¹³å±…ä¸­ï¼‰
- é¢œè‰²: `rgba(139, 90, 43, 0.5)` - åŠé€æ˜æœ¨è´¨è‰²è°ƒ
- æ–‡å­—é˜´å½±: ç™½è‰²é«˜å…‰ï¼Œå¢å¼ºå¯è¯»æ€§
- è¿‡æ¸¡æ•ˆæœ: 0.3s æ·¡å…¥æ·¡å‡º
- ä¸é˜»æŒ¡ç»˜ç”»: `pointer-events: none`

## æŠ€æœ¯å®ç°

### 1. HTML ç»“æ„è°ƒæ•´

**ä¿®æ”¹å‰**:
```html
<div style="display: flex; ...">
  <h2 class="game-subtitle">(facing right please)</h2>
  <div id="fish-probability">...</div>
</div>

<div class="game-canvas-wrapper">
  <canvas id="draw-canvas"></canvas>
</div>
```

**ä¿®æ”¹å**:
```html
<div style="display: flex; ...">
  <!-- æç¤ºæ–‡å­—å·²ç§»é™¤ -->
  <div id="fish-probability">...</div>
</div>

<div class="game-canvas-wrapper">
  <canvas id="draw-canvas"></canvas>
  <!-- æç¤ºæ–‡å­—ç§»åˆ°ç”»å¸ƒå†…éƒ¨ -->
  <div id="canvas-hint" class="canvas-hint">
    <span style="font-size: 24px;">ğŸ </span>
    <span style="font-size: 18px; font-weight: 600;">(facing right please)</span>
  </div>
  <div id="drawing-particles"></div>
</div>
```

### 2. CSS æ ·å¼

```css
/* ç”»å¸ƒæç¤ºæ–‡å­— - å±…ä¸­è¦†ç›–å±‚ */
.canvas-hint {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);  /* å®Œç¾å±…ä¸­ */
  z-index: 2;  /* åœ¨ç”»å¸ƒä¸Šæ–¹ */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  pointer-events: none;  /* ä¸é˜»æŒ¡é¼ æ ‡äº‹ä»¶ */
  color: rgba(139, 90, 43, 0.5);  /* æœ¨è´¨è‰²è°ƒï¼ŒåŠé€æ˜ */
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
  transition: opacity 0.3s ease;
  user-select: none;
}

.canvas-hint.hidden {
  opacity: 0;
  visibility: hidden;
}
```

### 3. JavaScript é€»è¾‘

#### æ£€æµ‹ç”»å¸ƒæ˜¯å¦ä¸ºç©º
```javascript
function isCanvasEmpty() {
    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    const data = imageData.data;
    
    // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰åƒç´ éƒ½æ˜¯é€æ˜çš„
    for (let i = 3; i < data.length; i += 4) {
        if (data[i] !== 0) {
            return false; // å‘ç°éé€æ˜åƒç´ 
        }
    }
    return true;
}
```

#### æ›´æ–°æç¤ºæ˜¾ç¤ºçŠ¶æ€
```javascript
function updateCanvasHint() {
    if (!canvasHint) return;
    
    if (isCanvasEmpty()) {
        canvasHint.classList.remove('hidden');
    } else {
        canvasHint.classList.add('hidden');
    }
}
```

#### è§¦å‘æ—¶æœº
1. **é¡µé¢åŠ è½½æ—¶**: åˆå§‹åŒ–æ˜¾ç¤ºæç¤º
2. **å¼€å§‹ç»˜ç”»æ—¶** (`mousedown`/`touchstart`): ç«‹å³éšè—
3. **ç»˜ç”»ç»“æŸæ—¶** (`mouseup`/`touchend`): æ£€æŸ¥å¹¶æ›´æ–°
4. **æ’¤é”€æ“ä½œæ—¶** (`undo()`): æ£€æŸ¥å¹¶æ›´æ–°
5. **æ¸…ç©ºç”»å¸ƒæ—¶** (`clearCanvas()`): æ£€æŸ¥å¹¶æ›´æ–°

## ç”¨æˆ·ä½“éªŒæ”¹è¿›

### 1. è§†è§‰å¼•å¯¼
- âœ… æç¤ºç›´æ¥æ˜¾ç¤ºåœ¨ç»˜ç”»åŒºåŸŸï¼Œæ›´ç›´è§‚
- âœ… åŠé€æ˜è®¾è®¡ä¸ä¼šè¿‡äºçªå…€
- âœ… æœ¨è´¨è‰²è°ƒä¸ç”»æ¿é£æ ¼ç»Ÿä¸€

### 2. äº¤äº’æµç•…
- âœ… å¼€å§‹ç»˜ç”»æ—¶ç«‹å³éšè—ï¼Œä¸å½±å“ç»˜ç”»
- âœ… æ·¡å…¥æ·¡å‡ºè¿‡æ¸¡è‡ªç„¶
- âœ… ä¸é˜»æŒ¡é¼ æ ‡äº‹ä»¶ï¼Œå®Œå…¨é€æ˜

### 3. æ™ºèƒ½æ˜¾ç¤º
- âœ… ç”»å¸ƒä¸ºç©ºæ—¶è‡ªåŠ¨æ˜¾ç¤º
- âœ… æœ‰å†…å®¹æ—¶è‡ªåŠ¨éšè—
- âœ… æ¸…ç©ºåè‡ªåŠ¨é‡æ–°æ˜¾ç¤º

## æŠ€æœ¯ç»†èŠ‚

### å±…ä¸­å®šä½

ä½¿ç”¨ `absolute` + `transform` å®ç°å®Œç¾å±…ä¸­ï¼š

```css
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
```

**ä¸ºä»€ä¹ˆä¸ç”¨ Flexboxï¼Ÿ**
- çˆ¶å®¹å™¨ `.game-canvas-wrapper` å·²ç»æœ‰å¤æ‚çš„å¸ƒå±€
- `absolute` å®šä½ä¸å½±å“å…¶ä»–å…ƒç´ 
- `transform` å±…ä¸­æ›´ç²¾ç¡®

### å±‚çº§ç®¡ç†

```css
/* å±‚çº§é¡ºåº */
.game-canvas-wrapper canvas {
  z-index: 1;  /* ç”»å¸ƒ */
}

.canvas-hint {
  z-index: 2;  /* æç¤ºæ–‡å­— */
}

#drawing-particles {
  z-index: 3;  /* ç»˜ç”»ç²’å­æ•ˆæœ */
}
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. ç”»å¸ƒæ£€æµ‹ä¼˜åŒ–
```javascript
// åªæ£€æŸ¥ alpha é€šé“ï¼ˆæ¯ 4 ä¸ªå€¼ä¸­çš„ç¬¬ 4 ä¸ªï¼‰
for (let i = 3; i < data.length; i += 4) {
    if (data[i] !== 0) return false;
}
```

**ä¼˜åŒ–æ•ˆæœ**:
- è·³è¿‡ RGB é€šé“ï¼Œåªæ£€æŸ¥é€æ˜åº¦
- å‡å°‘ 75% çš„å¾ªç¯æ¬¡æ•°
- 600x360 ç”»å¸ƒ: 216,000 æ¬¡æ£€æŸ¥ â†’ 54,000 æ¬¡

#### 2. äº‹ä»¶è§¦å‘ä¼˜åŒ–
- åœ¨ `mousedown`/`touchstart` æ—¶ç«‹å³éšè—ï¼Œä¸ç­‰å¾…æ£€æµ‹
- åªåœ¨ `mouseup`/`touchend` æ—¶æ‰æ£€æµ‹ç”»å¸ƒçŠ¶æ€
- é¿å…åœ¨ `mousemove`/`touchmove` ä¸­é¢‘ç¹æ£€æµ‹

### æµè§ˆå™¨å…¼å®¹æ€§

| ç‰¹æ€§ | å…¼å®¹æ€§ | å¤‡æ³¨ |
|------|--------|------|
| `transform: translate(-50%, -50%)` | IE 9+ | å®Œç¾å±…ä¸­ |
| `pointer-events: none` | IE 11+ | ä¸é˜»æŒ¡äº‹ä»¶ |
| `getImageData()` | æ‰€æœ‰ç°ä»£æµè§ˆå™¨ | Canvas API |
| `classList.add/remove()` | IE 10+ | DOM æ“ä½œ |
| `transition` | IE 10+ | æ·¡å…¥æ·¡å‡º |

## ä¿®æ”¹çš„æ–‡ä»¶

### `index.html`
- **ç¬¬ 224-232 è¡Œ**: ç§»é™¤æ ‡é¢˜ä¸‹æ–¹çš„æç¤ºæ–‡å­—
- **ç¬¬ 237-240 è¡Œ**: åœ¨ç”»å¸ƒå®¹å™¨å†…æ·»åŠ æç¤ºè¦†ç›–å±‚
- **ç¬¬ 32 è¡Œ**: æ›´æ–° CSS ç‰ˆæœ¬å·åˆ° `v=1.8`

### `src/css/cute-game-style.css`
- **ç¬¬ 479-500 è¡Œ**: æ·»åŠ  `.canvas-hint` æ ·å¼å’Œ `.hidden` çŠ¶æ€

### `src/js/app.js`
- **ç¬¬ 8-39 è¡Œ**: æ·»åŠ ç”»å¸ƒæç¤ºæ§åˆ¶é€»è¾‘
  - `isCanvasEmpty()`: æ£€æµ‹ç”»å¸ƒæ˜¯å¦ä¸ºç©º
  - `updateCanvasHint()`: æ›´æ–°æç¤ºæ˜¾ç¤ºçŠ¶æ€
- **ç¬¬ 158, 177 è¡Œ**: åœ¨é¼ æ ‡äº‹ä»¶ä¸­è°ƒç”¨ `updateCanvasHint()`
- **ç¬¬ 202, 236 è¡Œ**: åœ¨è§¦æ‘¸äº‹ä»¶ä¸­è°ƒç”¨ `updateCanvasHint()`
- **ç¬¬ 1557, 1564 è¡Œ**: åœ¨ `undo()` å’Œ `clearCanvas()` ä¸­è°ƒç”¨

## æµ‹è¯•å»ºè®®

### 1. åŸºç¡€åŠŸèƒ½æµ‹è¯•
- [ ] é¡µé¢åŠ è½½æ—¶ï¼Œæç¤ºæ˜¾ç¤ºåœ¨ç”»å¸ƒæ­£ä¸­å¤®
- [ ] å¼€å§‹ç»˜ç”»æ—¶ï¼Œæç¤ºç«‹å³æ¶ˆå¤±
- [ ] åœæ­¢ç»˜ç”»æ—¶ï¼Œæç¤ºä¿æŒéšè—ï¼ˆç”»å¸ƒæœ‰å†…å®¹ï¼‰
- [ ] æ¸…ç©ºç”»å¸ƒåï¼Œæç¤ºé‡æ–°æ˜¾ç¤º

### 2. äº¤äº’æµ‹è¯•
- [ ] é¼ æ ‡ç»˜ç”»ï¼šæç¤ºæ­£ç¡®æ˜¾ç¤º/éšè—
- [ ] è§¦æ‘¸ç»˜ç”»ï¼šæç¤ºæ­£ç¡®æ˜¾ç¤º/éšè—
- [ ] æ’¤é”€æ“ä½œï¼šæç¤ºçŠ¶æ€æ­£ç¡®æ›´æ–°
- [ ] æ’¤é”€åˆ°ç©ºç”»å¸ƒï¼šæç¤ºé‡æ–°æ˜¾ç¤º

### 3. è§†è§‰æµ‹è¯•
- [ ] æç¤ºæ–‡å­—åœ¨ç”»å¸ƒæ­£ä¸­å¤®
- [ ] é¢œè‰²å’Œå­—ä½“å¤§å°åˆé€‚
- [ ] æ·¡å…¥æ·¡å‡ºè¿‡æ¸¡æµç•…
- [ ] ä¸é˜»æŒ¡ç»˜ç”»æ“ä½œ

### 4. æ€§èƒ½æµ‹è¯•
- [ ] ç»˜ç”»æ—¶æ— æ˜æ˜¾å¡é¡¿
- [ ] ç”»å¸ƒæ£€æµ‹é€Ÿåº¦å¿«ï¼ˆ< 10msï¼‰
- [ ] å†…å­˜å ç”¨æ­£å¸¸

### 5. å…¼å®¹æ€§æµ‹è¯•
- [ ] Chrome/Edge: æ­£å¸¸
- [ ] Firefox: æ­£å¸¸
- [ ] Safari: æ­£å¸¸
- [ ] 360 æµè§ˆå™¨: æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯æµè§ˆå™¨: æ­£å¸¸

## æ³¨æ„äº‹é¡¹

### 1. ç”»å¸ƒæ£€æµ‹æ€§èƒ½
- `getImageData()` ä¼šè¯»å–æ•´ä¸ªç”»å¸ƒçš„åƒç´ æ•°æ®
- 600x360 ç”»å¸ƒ = 216,000 åƒç´  = 864,000 å­—èŠ‚
- åªåœ¨å¿…è¦æ—¶è°ƒç”¨ï¼ˆç»˜ç”»ç»“æŸã€æ’¤é”€ã€æ¸…ç©ºï¼‰

### 2. æç¤ºæ–‡å­—å†…å®¹
- å½“å‰æ–‡å­—: "(facing right please)"
- å¦‚éœ€ä¿®æ”¹ï¼Œç¼–è¾‘ `index.html` ç¬¬ 239 è¡Œ
- ä¿æŒç®€çŸ­ï¼Œé¿å…æ¢è¡Œ

### 3. é¢œè‰²å’Œæ ·å¼
- é¢œè‰²: `rgba(139, 90, 43, 0.5)` - ä¸æœ¨è´¨ç”»æ¿åè°ƒ
- å¯æ ¹æ®éœ€è¦è°ƒæ•´é€æ˜åº¦ï¼ˆç¬¬ 4 ä¸ªå‚æ•°ï¼‰
- æ–‡å­—é˜´å½±å¢å¼ºå¯è¯»æ€§

### 4. z-index å±‚çº§
- ç¡®ä¿æç¤ºåœ¨ç”»å¸ƒä¸Šæ–¹ï¼ˆz-index: 2ï¼‰
- ä½†åœ¨ç»˜ç”»ç²’å­ä¸‹æ–¹ï¼ˆz-index: 3ï¼‰
- ä¸è¦éšæ„ä¿®æ”¹ z-index

## ç›¸å…³æ–‡æ¡£

- `360_BROWSER_CENTERING_FIX.md` - ç”»å¸ƒå±…ä¸­å…¼å®¹æ€§ä¿®å¤
- `MOBILE_LAYOUT_IMPROVEMENTS.md` - ç§»åŠ¨ç«¯å¸ƒå±€ä¼˜åŒ–

## æ—¥æœŸ
2025-11-20
