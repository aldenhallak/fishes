# 私人鱼缸测试指南
## Quick Test Guide for Private Tank

---

## 🚀 快速测试（5分钟）

### 步骤 1: 启动服务器
```bash
npm run dev
```

### 步骤 2: 登录
访问 `http://localhost:3000/login.html` 并登录

### 步骤 3: 测试私人鱼缸
访问 `http://localhost:3000/fishtanks.html`

**应该看到：**
- ✅ 全屏鱼缸画布（不是网格卡片）
- ✅ 鱼儿在水中游动
- ✅ 水草、沙地等装饰
- ✅ 底部控制栏显示统计信息
- ✅ 鱼上方有标识（ME = 自己的，❤️ = 收藏的）

### 步骤 4: 测试喂食
**桌面端：**
- 按住 `Shift` 键 + 点击鱼缸
- 或者右键点击鱼缸

**移动端：**
- 快速双击鱼缸
- 或者长按鱼缸

**应该看到：**
- ✅ 食物出现并下沉
- ✅ 附近的鱼游向食物
- ✅ 鱼吃掉食物后短暂停顿

---

## 📋 详细测试清单

### 界面测试
- [ ] 鱼缸占据全屏
- [ ] 底部有控制栏
- [ ] 显示页面标题 "My Private Fish Tank"
- [ ] 显示鱼食余额
- [ ] 有导航按钮（画鱼、全局鱼缸、排名、个人资料）

### 鱼儿显示测试
- [ ] 如果你画过鱼，它们会显示并游动
- [ ] 自己的鱼上方显示蓝色圆圈 "ME"
- [ ] 收藏的鱼上方显示红心 ❤️
- [ ] 死亡的鱼上方显示骷髅 💀（如有）
- [ ] 死鱼游得更慢，会缓慢下沉

### 统计信息测试
底部控制栏应显示：
- [ ] 自己的鱼数量正确
- [ ] 收藏的鱼数量正确
- [ ] 平均等级正确
- [ ] 鱼食余额正确

### 动画测试
- [ ] 鱼儿持续游动
- [ ] 鱼儿碰到边界会反弹
- [ ] 鱼儿游动方向与身体朝向一致
- [ ] 装饰元素显示正常（水草、沙地、光线）

### 喂食测试
- [ ] 能成功投喂食物
- [ ] 食物会缓缓下沉
- [ ] 鱼儿会游向附近的食物
- [ ] 鱼儿吃掉食物后会短暂停顿
- [ ] 食物15秒后自动消失

### 收藏功能测试
1. 访问 `rank.html` 或 `tank.html`
2. 找到其他用户的鱼
3. 点击 🤍 收藏按钮
4. 返回 `fishtanks.html`
5. [ ] 收藏的鱼出现在鱼缸中
6. [ ] 收藏的鱼上方显示 ❤️ 标识
7. [ ] 统计数据中"Favorited"数量增加

### 响应式测试
**桌面端（>768px）：**
- [ ] 鱼缸高度 = 100vh - 80px
- [ ] 喂食提示显示 "Hold Shift + Click or Right-click"

**移动端（≤768px）：**
- [ ] 鱼缸高度 = 100vh - 140px
- [ ] 喂食提示显示 "Double-tap or Long-press"
- [ ] 标题字体变小
- [ ] 控制栏padding减小

---

## 🔍 如果没有鱼显示

### 情况 1: 你还没有画过鱼
**解决：**
1. 点击 "Draw Fish" 按钮
2. 画一条鱼并保存
3. 返回私人鱼缸

### 情况 2: 你还没有收藏任何鱼
**解决：**
1. 访问 `rank.html` 或 `tank.html`
2. 点击其他用户鱼旁边的 🤍 按钮
3. 返回私人鱼缸

### 情况 3: 出现错误
**检查：**
1. 打开浏览器控制台（F12）
2. 查看是否有红色错误信息
3. 检查 `FishTankFavorites.getMyFish()` API是否正常
4. 确认已登录

---

## 🐛 常见问题排查

### 问题：鱼缸是空白的
**检查：**
1. 控制台是否有错误
2. `private-fishtank-swim.js` 是否正确加载
3. Canvas 是否正确初始化
4. 刷新页面重试

### 问题：鱼不会游动
**检查：**
1. 控制台是否有JavaScript错误
2. `requestAnimationFrame` 是否正常工作
3. 鱼的图片是否成功加载

### 问题：投喂食物没反应
**检查：**
1. 确认使用了正确的操作方式
   - 桌面：Shift+点击或右键
   - 移动：双击或长按
2. 控制台是否有错误

### 问题：收藏的鱼不显示
**检查：**
1. 确认在其他页面成功收藏了鱼
2. 检查 `FishTankFavorites.getMyFish()` 返回的数据
3. 查看控制台是否有API错误

---

## 📊 性能检查

### 帧率测试
在浏览器控制台运行：
```javascript
let frameCount = 0;
let lastTime = performance.now();
setInterval(() => {
  const now = performance.now();
  const fps = frameCount / ((now - lastTime) / 1000);
  console.log(`FPS: ${fps.toFixed(1)}`);
  frameCount = 0;
  lastTime = now;
}, 1000);
```

**期望结果：**
- 鱼数量 < 20: FPS ≥ 60
- 鱼数量 20-50: FPS ≥ 30
- 鱼数量 > 50: FPS ≥ 20

### 内存检查
1. 打开浏览器开发者工具
2. 切换到 Performance 或 Memory 标签
3. 观察内存使用是否稳定
4. 不应该有明显的内存泄漏

---

## ✅ 验收标准

### 必须通过
- [ ] 页面能正常加载
- [ ] 鱼儿能正常显示并游动
- [ ] 统计信息正确
- [ ] 喂食功能正常
- [ ] 收藏功能正常
- [ ] 标识显示正确（ME/❤️/💀）

### 推荐通过
- [ ] 响应式布局正常
- [ ] 动画流畅（FPS ≥ 30）
- [ ] 无控制台错误
- [ ] 导航按钮正常工作

---

## 📸 截图对比

### 之前（旧版本）
- 静态网格布局
- 鱼显示为卡片
- 有背景选择器
- 有详细的鱼列表

### 现在（新版本）
- 全屏游动鱼缸
- 鱼在水中游动
- 有装饰元素
- 简化的控制栏

---

**测试完成后，请报告任何问题！**

如有问题，请提供：
1. 浏览器控制台的错误信息
2. 浏览器类型和版本
3. 具体的操作步骤
4. 预期结果 vs 实际结果

